// Locations to be used in Map

var locations = [
  {
    "formatted_address": "Lilla Nygatan 13, 111 28 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3237975,
        "lng": 18.0687575
      },
      "viewport": {
        "northeast": {
          "lat": 59.32514163029151,
          "lng": 18.0700940302915
        },
        "southwest": {
          "lat": 59.3224436697085,
          "lng": 18.06739606970849
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "68fc1678aff64e0784e3dbf3fe9116fb26011751",
    "name": "The Hairy Pig Restaurant",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 4608,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/116014213566573901420/photos\"\u003eDavid Hernandez\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh6.googleusercontent.com/-IyNOC9rBh-A/WPT4DdPUOgI/AAAAAAAAASw/ejMlaGfF46wQuAncwCCmVeV3qpwAyOHcQCLIB/k/"
        },
        "width": 3456
      }
    ],
    "place_id": "ChIJ5T75UeJ3X0YRPTqqPX9ylLo",
    "rating": 4.7,
    "reference": "CmRSAAAA_PKPdXQsuBchhwzm_8A6nyW_ccysdl3Ui_9ClDkLx5Jnw4Cmq-wS5IwIiByAsECsYwF2988yw07XR-lsr0hMmssEA7xt3AHayy6gt7PIJVaSsIRRrpex6F6sQGViwmxnEhCNFlrawkZsfNC4MsYkph7iGhQ3wzVG2viquAiKWm-QsPrJrpd0GQ",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Galärvarvsvägen 14, 115 21 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3280227,
        "lng": 18.0913986
      },
      "viewport": {
        "northeast": {
          "lat": 59.32913978029151,
          "lng": 18.0925618302915
        },
        "southwest": {
          "lat": 59.32644181970851,
          "lng": 18.08986386970849
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "a77fba23916ff58e53bdc73bef615555633dc86a",
    "name": "The Vasa Museum Restaurant",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 4128,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/100840534223897262499/photos\"\u003eVlaďka Závěrková\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh3.googleusercontent.com/-osBqJ8Q2Ia8/WRxbTMiGc7I/AAAAAAAAAIM/mV59bujmMC0rp3j9e4fj8ckpYqtI2BZpQCLIB/k/"
        },
        "width": 3096
      }
    ],
    "place_id": "ChIJrymDbVSdX0YRDBbaeHPfCbA",
    "rating": 4.3,
    "reference": "CmRSAAAAoU4bk4QUtsshg9y4QMzBE4jTyZ-su_ONq8Xw0bp6OeYmg27IiADjEDb_OpNsnkaW92J7mZRJ6EM564ZNryc0qfKn3A49-aBMTETmf71IMsVaJ_6Chu_pneFf_jNrmFSMEhA4kNYupq6xdSFgBuKZObr_GhQ_pxqv7EQwhD-Tzrcw5XoPc3ZUGQ",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Fjällgatan 23B, 116 28 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3175852,
        "lng": 18.0839998
      },
      "viewport": {
        "northeast": {
          "lat": 59.31887148029151,
          "lng": 18.0853356802915
        },
        "southwest": {
          "lat": 59.31617351970849,
          "lng": 18.0826377197085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "d1cd5dc7eec734127838153e912027329b5e6102",
    "name": "Hermans Vegetarian Restaurant and Garden Café",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 2160,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/101065402433360036801/photos\"\u003eJay Gregg\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh5.googleusercontent.com/-P7vsIQLGdlw/WB8gG_m12HI/AAAAAAAAB8Y/if3VqEKl_OQFXfGEkUZPnh3ORUXSNNoiACLIB/k/"
        },
        "width": 3840
      }
    ],
    "place_id": "ChIJhcH3Ofl3X0YRspJafWpcGM4",
    "rating": 4.4,
    "reference": "CmRSAAAAhDowqh6TjpEQZPg8DEqAiLJoPTGmA61xCFasU7vKSua8uUe0cBuBDEAJ0N_FYSNzOnQyjoXnd3TfdLhgouJ7jJavTNc-nHS7kDPpJv4nBARKFi-F8fAG471ueZnAkzLEEhAIEwmOQvRf-f6u2XdyP5vMGhRLP-WgwzJtBs5nPuNLbAn4IQaE5w",
    "types": ["restaurant", "food", "store", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Blekingegatan 40, 116 62 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.31053419999999,
        "lng": 18.076346
      },
      "viewport": {
        "northeast": {
          "lat": 59.31195873029149,
          "lng": 18.07761173029151
        },
        "southwest": {
          "lat": 59.30926076970848,
          "lng": 18.0749137697085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "4ef5eba36ea2009bd041c8287d3af9c0261e33fe",
    "name": "Restaurant Pelikan",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 4032,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/104139257510607871762/photos\"\u003eKyle\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh3.googleusercontent.com/-IOCGMUqLUgU/WIq2-cz5GpI/AAAAAAAAMpc/fcd2lSXjwUcoyORVvS8nrse3LCEBlcWPQCLIB/k/"
        },
        "width": 3024
      }
    ],
    "place_id": "ChIJrSV1Pfd3X0YRxwhoxSQ-Cug",
    "rating": 4,
    "reference": "CmRSAAAAdvzO__RyG1YUf2EPlt1toQOqxgZE8ZtnAcD0SmQ5TysJW_5Mc978TO-Gwt_sqXa4xqS9UMnu_rqzXU48oHVMDGxGP8PGO9Gp0pHu4uEorObZeh4rfhi0dSaGl9D1avpNEhAvHBfcGPAc24OKoJfVS6g4GhQrk-ocQP_M5erl2MC7W3SbPk9VsQ",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Nybrogatan 16, 114 39 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.334795,
        "lng": 18.077607
      },
      "viewport": {
        "northeast": {
          "lat": 59.33615243029151,
          "lng": 18.0789142802915
        },
        "southwest": {
          "lat": 59.33345446970849,
          "lng": 18.0762163197085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "e4a3624612ca04b6d9d8936d5e899e34efe2af10",
    "name": "Rice Asian Restaurant & Bar",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 2992,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/102776017878660782727/photos\"\u003eAndrei Picus\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh4.googleusercontent.com/-9GgaUzFezRU/WDGW-lRriqI/AAAAAAAAe1g/NqfVw7hNR6ghQbgfsHIMHlidDkibHTyRwCLIB/k/"
        },
        "width": 4000
      }
    ],
    "place_id": "ChIJkYdRA1udX0YRcBzxNaS__tA",
    "rating": 4,
    "reference": "CmRSAAAAPRy35zhuO8yhncquRLIpPazRrNIVEqeTUKgmCegoaC-WgYr0mMBxKtmzBlk1CSZopFhzxI-1VjwAHYeUIcOqp-55mXzT2krqszYDb3kLa96ljUnBoad_2chk5EJ8ZayZEhAO6Y1-C36rlVjp7-EdsJWMGhSCABZrxh_bl7JPY5Kt8kz_xMIklw",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Riddarholmen, 111 28 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.32402699999999,
        "lng": 18.062714
      },
      "viewport": {
        "northeast": {
          "lat": 59.32540928029151,
          "lng": 18.0641652302915
        },
        "southwest": {
          "lat": 59.3227113197085,
          "lng": 18.06146726970849
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/lodging-71.png",
    "id": "c1a64c4042887fce275d2cc981147e90006fd9c2",
    "name": "Mälardrottningen Hotell & Restaurang",
    "photos": [
      {
        "height": 1836,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/112118421072477224554/photos\"\u003eKatja Dausi\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh4.googleusercontent.com/-3JpWbx_JVx0/V6NVwedprnI/AAAAAAAAVHI/s7JyNvw0YcstUaYM8nDr8TVQwkbVSBeEQCJkC/k/"
        },
        "width": 3264
      }
    ],
    "place_id": "ChIJsSLxdOF3X0YRMgvoefxVILg",
    "price_level": 2,
    "rating": 4.1,
    "reference": "CmRSAAAA3z1939hw1-pvJaLYnJJZ59hflodvis2wjYxAQHaGNdR6pVsQIevazniDUDeigl9UBoNLtNEC24SCs7GdAJUhrRBVSKbIva2JrmrDIj2XKo5gVEpk7HfXwB5334AIESxCEhADpSveOTGh5IWp8v5dlcicGhQSTO8VlaqlKjU2cr-Ja9ENnvAU1w",
    "types": ["lodging", "restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Österlånggatan 34, 111 31 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3230022,
        "lng": 18.0733949
      },
      "viewport": {
        "northeast": {
          "lat": 59.3243326802915,
          "lng": 18.0748290302915
        },
        "southwest": {
          "lat": 59.32163471970849,
          "lng": 18.0721310697085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "a701c490acceac092f61b3fe42f245906eadbb4c",
    "name": "Cultur Bar & Restaurant",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 1365,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/102419085933070416828/photos\"\u003eCultur Bar &amp; Restaurant\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh6.googleusercontent.com/-We8MMRtj08E/VNczM71N71I/AAAAAAAAADY/XuE-HbEdmpUuaJgkB1l8iOqBC8eXTFQGQCJkC/k/"
        },
        "width": 2048
      }
    ],
    "place_id": "ChIJyxhU1uJ3X0YRcprIa2VOCKo",
    "rating": 3.8,
    "reference": "CmRSAAAAiIJmhwIb1rQUubT6FXpTP9f9BgTxoF3HtgVbD90d3Mqh0THf5w6TYp0L7WfWZPN81EoGpB-aPneN8svwStL0n1xd4FWD7lyq03e-hj-Vp80xT6B02usoNPaHGhzU16A2EhDWWKugi9qou5C1E3tgis8yGhRo9Ck99PEDe41fog_X2DGXNxhYoA",
    "types": ["restaurant", "bar", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Hamngatan 19, 111 47 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3325137,
        "lng": 18.0707369
      },
      "viewport": {
        "northeast": {
          "lat": 59.3339687802915,
          "lng": 18.0720658802915
        },
        "southwest": {
          "lat": 59.33127081970849,
          "lng": 18.0693679197085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "12448be43411087f69e0371ee1f333dd24ab3a30",
    "name": "TGI Fridays",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 2988,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/117357053268184024770/photos\"\u003eMikael Rönnerblad\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh4.googleusercontent.com/-GpYyyiI62Lw/VxJyUqg3nqI/AAAAAAAAAJo/ueRIvID6DTkFq0JedNiSJA5IlqMqP4ENgCJkC/k/"
        },
        "width": 5312
      }
    ],
    "place_id": "ChIJt9TXBVydX0YRv9VYfU1-FBs",
    "rating": 3.2,
    "reference": "CmRRAAAAKIMlvdXJCgih9UJ7D7Aj_oLk-GnXwqn2QAsu-h_7yPUwIGps-aozPi49WX2t_f-sT5VjHZWyTYTS-iTWjlzrGlzl2Arg7aFjixxuPhbrpmQ04RCD90cqTL5TuzFAU1P0EhDNsO-7gJbg_tEMeQ0DK6deGhRwanjNGUmIOzYOTGSKUzFZGUwAWg",
    "types": ["restaurant", "bar", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Slöjdgatan 9, 111 57 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.33419399999999,
        "lng": 18.062487
      },
      "viewport": {
        "northeast": {
          "lat": 59.3354786302915,
          "lng": 18.0637447302915
        },
        "southwest": {
          "lat": 59.33278066970848,
          "lng": 18.0610467697085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "5a27af895d96af5e55524f7e8af9c34d6d7898a2",
    "name": "Pizza Hut",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 3024,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/115614154682092876578/photos\"\u003ePaul Rathwallner\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh5.googleusercontent.com/-us0htrliplI/V_eNa6MDGHI/AAAAAAACQSA/N8a_yvU7bjQoDJl-akx9hGkwE3U9hnuWACJkC/k/"
        },
        "width": 4032
      }
    ],
    "place_id": "ChIJAxmp912dX0YRB84cobAIn_k",
    "price_level": 1,
    "rating": 3.2,
    "reference": "CmRSAAAAglQjNrv51vYbcQyu-J8pq3U4w3klRuz-Qt6EwoeoAZqdou4y59PFVTlXltzOitdFQahaGyhbsaSGyGygBUR5e_Ow4dF_ys5TPpMSbuVog_alWJEjC-bIDb1jtosocpraEhAO38YmStti-0OveXcCCW4qGhQrDXXsyVINrQmsxxI3EAiKja_3Ow",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Birger Jarlsgatan 16, 114 34 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.335139,
        "lng": 18.074045
      },
      "viewport": {
        "northeast": {
          "lat": 59.33645423029151,
          "lng": 18.0752162802915
        },
        "southwest": {
          "lat": 59.33375626970849,
          "lng": 18.07251831970849
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "92e3c9786f8d14522ecd7f30966daae19a62c8b4",
    "name": "TGI Fridays",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 2736,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/108836643806569617258/photos\"\u003eBjörn Knudsen\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh3.googleusercontent.com/-RAzUCCfqVVk/WA34fDtg7GI/AAAAAAACbTA/4vfLRFAoLrshgAXwOfcc00hUI3EBHxKMQCLIB/k/"
        },
        "width": 4864
      }
    ],
    "place_id": "ChIJac4jeVudX0YRWniUpeUeNuw",
    "rating": 3.4,
    "reference": "CmRSAAAAcSA7q7dlAQKZ3KDRH8XQRiOQZfR7GcDqigRkMH3pjvZ1V2FKZBQ-28e6Fo97F08dm2ZmLdgxtBdJkBXxSsMGBa4ulwC4iNQEwqS-qcQkBRu9lLUfWsKeA-twRYoSEm6CEhBJjjGs_iRy2e5zcB1MIeAvGhRTlRaMl-dc6vYD8OYC3j--_s3cJQ",
    "types": [
      "meal_takeaway",
      "bar",
      "restaurant",
      "food",
      "point_of_interest",
      "establishment"
    ]
  },
  {
    "formatted_address": "Klarabergsgatan 56, 111 21 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.33181779999999,
        "lng": 18.0594099
      },
      "viewport": {
        "northeast": {
          "lat": 59.3330664802915,
          "lng": 18.0610296802915
        },
        "southwest": {
          "lat": 59.33036851970849,
          "lng": 18.0583317197085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "17fecffef6e1f202375925885107297170432480",
    "name": "Pizza Hut",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 1478,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/106530602339940946878/photos\"\u003ePizza Hut\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh4.googleusercontent.com/-nrxSn5JqusU/WMFL_JfiGMI/AAAAAAAAABw/ITgDCappSYkOt2PiuZCq7e1-8nDe1dxJgCLIB/k/"
        },
        "width": 2048
      }
    ],
    "place_id": "ChIJxU_2nmCdX0YRKvB-sHRf92U",
    "price_level": 1,
    "rating": 3.5,
    "reference": "CmRRAAAA3VEGvGDCW4VKxqTpvKOPGwjwQoY_CAamtsB2JWTe7fwaKqDTuDz4USdPBCyc_Z-ktH9OuYDC4wijS1_iUNorneJRUGp2WVipXL4nvlhQRpask0RU6Brjpw5Ma0aYlBxhEhCEdhEvv3f408Yj6WVaElGWGhSZxV8I8boRYExempfHhXgboEZpnQ",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Österlånggatan 1, 111 31 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.325912,
        "lng": 18.073754
      },
      "viewport": {
        "northeast": {
          "lat": 59.3272606802915,
          "lng": 18.0751017302915
        },
        "southwest": {
          "lat": 59.3245627197085,
          "lng": 18.0724037697085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "60eaafed82c148ff084d4eebfef0ed70fc185826",
    "name": "Tradition",
    "opening_hours": {
      "open_now": false,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 3024,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/104412518803175061479/photos\"\u003eAnastasia Holz\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh4.googleusercontent.com/-W2b5NuS1IkI/WGWUDrsT_HI/AAAAAAAAcgE/uWTcxtkpiVUTFKyp_sMOtwFhS5yBQz-BQCLIB/k/"
        },
        "width": 4032
      }
    ],
    "place_id": "ChIJN4k7GmmdX0YRouVU1lvtKNo",
    "rating": 4.4,
    "reference": "CmRSAAAAUzK7zeEjQ-j0yCbTz_mFhksuPtOi9sqPWjckJBUnHH5s_WSaJ9y_O25ItSIr8o9dNR2g8pges4wuKP2X7KE40derSPCC6g84TOfNlAmflms1hK36ZCPJe9d-J4c4EW78EhB7NVtLMMZ8tMEDpK5sDlOkGhSyJTsIBUIUSHm9A6EQmCdByN4nAw",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Södermalmstorg 6, 116 45 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.32019510000001,
        "lng": 18.070261
      },
      "viewport": {
        "northeast": {
          "lat": 59.32148673029151,
          "lng": 18.0717345802915
        },
        "southwest": {
          "lat": 59.3187887697085,
          "lng": 18.0690366197085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "2d914a51167f06eb89a7ec5e0ce3481e1ce8b67c",
    "name": "Blå Dörren",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 4140,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/118077762779506109428/photos\"\u003eMichael Löhf\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh5.googleusercontent.com/-yexXenI7YD4/V8-iw4nNy3I/AAAAAAAAAqo/LjDTII6YRXQUsICg-9236BJMKQnimtB3QCJkC/k/"
        },
        "width": 5520
      }
    ],
    "place_id": "ChIJ6ZY7p-R3X0YRXcXS0vhGatM",
    "rating": 4.3,
    "reference": "CmRSAAAASTi438QJd8VAzniZAZUdzmekRTpYPrxpGAKfRmGZ8_i87u_I-7jkYRWdkFxulx-7QMc4wnO3CUT9Kh_6mw2zJDa4dwouBqc2QLxlxYtEiG11eM_zTHToclvctJocXAq-EhAGk9yNQNPTXH2UvEKV0eZ4GhS8ejCMKcVuxvUAZRG5XFiOWwICsQ",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Nytorgsgatan 30, 116 40 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3145785,
        "lng": 18.0814279
      },
      "viewport": {
        "northeast": {
          "lat": 59.31590093029151,
          "lng": 18.0828801302915
        },
        "southwest": {
          "lat": 59.31320296970849,
          "lng": 18.0801821697085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "d8dad531961b3caf9402ecf5b628329ca6ac1a6b",
    "name": "Meatballs for the People",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 532,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/101444309164317687134/photos\"\u003eMeatballs for the People\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh5.googleusercontent.com/-t-LUO_8GSe0/VW8PuRC5sNI/AAAAAAAAAA0/lhWkHkMARMUKg0Gf85KI4bgcdsJiEbX4gCJkC/k/"
        },
        "width": 532
      }
    ],
    "place_id": "ChIJbYc9vPl3X0YR00NA50Rzmxw",
    "rating": 4.3,
    "reference": "CmRRAAAAQAAgiMK9yNSethtTlGtHJ0JxL8am-cXbQwmYGAsKhLVrXCW0RRJhYWejKCX4V8yyTqRsd0ymjhoXolbg_pNt2YqZPTxjJpPXgStZPyBNPT-qiSOtd1W2Cj35xGcq5QXkEhCVCF7QrJ-OK5breUQTcXcjGhRtxgBIwVv5IJc97QHE1PkoHKoZUQ",
    "types": ["restaurant", "food", "store", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Humlegårdsgatan 23, 114 46 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3369301,
        "lng": 18.0731646
      },
      "viewport": {
        "northeast": {
          "lat": 59.3383790302915,
          "lng": 18.0745933302915
        },
        "southwest": {
          "lat": 59.33568106970849,
          "lng": 18.0718953697085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "c3e79d1f949412d9df940d5785100dc7792bf630",
    "name": "Jamie's Italian",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 2988,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/105099300732004095333/photos\"\u003eChristoffer Nilsson\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh6.googleusercontent.com/-l1ATaVFRTcg/Vbjhcwz5LaI/AAAAAAAAHco/NAkNZt5HXQ8PkDhDcSqA6e_KmSIZDLINQCJkC/k/"
        },
        "width": 5312
      }
    ],
    "place_id": "ChIJKXrHsFydX0YRjzHejWWbtCg",
    "rating": 3.4,
    "reference": "CmRRAAAAs99DX_LfAIdwUL4LXdr_BKLUX3O4NdLKJALKA2BIw3vix2tyBecvsbHmYJiWNMcluDjJ3r0S8VBelovkxb5OPwBQN0Q4gE9BANEdBH72WFJ_7-bF1yQdqmTVdEWRNvwmEhBg1WAtBS_5i-LltcdLf27_GhSaKy4dwlMvspL8KVj4SccxHkYv5g",
    "types": ["restaurant", "bar", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Humlegårdsgatan 17, 114 46 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.33674719999999,
        "lng": 18.0748179
      },
      "viewport": {
        "northeast": {
          "lat": 59.3381409302915,
          "lng": 18.0762003302915
        },
        "southwest": {
          "lat": 59.3354429697085,
          "lng": 18.0735023697085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "f68647026e81e91e022c0fe957cca2783f5892b1",
    "name": "Ekstedt",
    "opening_hours": {
      "open_now": false,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 1365,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/109118887366301804310/photos\"\u003eEkstedt\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh6.googleusercontent.com/-95kqCQT9LAI/Vv6OzbsExqI/AAAAAAAAAA4/1cwNbOySkMM0Z05D8qYGIGPUKdZw0QATACJkC/k/"
        },
        "width": 1368
      }
    ],
    "place_id": "ChIJhThAV1udX0YRWy5QWVtNNWY",
    "rating": 4.6,
    "reference": "CmRRAAAAgFXnifgp1pXOxKVQOFMQ7aRUjUv17KsTH3WUDXPp80BGIRJ3yHPY4zH5ttmShCpyzZU0micmtjTVIcnTrtoRuDiRboNAhvNzD8ZENE9TYc-jsMDjotcfRkSK6FC2EaBBEhC11OyxuWjsgl8rQkEgn7v7GhQJi89rV8Fcznz4XkBV6GFq_RjCeA",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Österlånggatan 7, 111 31 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3256689,
        "lng": 18.0739641
      },
      "viewport": {
        "northeast": {
          "lat": 59.32701708029151,
          "lng": 18.0753085802915
        },
        "southwest": {
          "lat": 59.3243191197085,
          "lng": 18.0726106197085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "252bdd5198dc28ac4bed773d4488ca2126dce5a8",
    "name": "Gästabud",
    "photos": [
      {
        "height": 2160,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/101653392539910090138/photos\"\u003eTrevor Anderson\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh5.googleusercontent.com/-ROIN1zaKTC8/V-kf_hj9wfI/AAAAAAAAADU/4b48vpuEFkgu9vH0DH5tSoIpOOzRPmOrwCJkC/k/"
        },
        "width": 3840
      }
    ],
    "place_id": "ChIJm8qsClidX0YR0H6OcH7SycU",
    "rating": 4.7,
    "reference": "CmRSAAAAQEVUl1jE5jSvr7qnD-I0jowuKrEBu7OGkrunbNxURzqQG8M20vhAVIm18lkRE-GEQy6-3ZXjbBoPP65dNlR_m7h57ZsmvPCOdd7TL--SxU0u8GRxqdToVNzv8ODBXfT9EhCQY2cOR-PfBx_rUlLWB1rqGhRY_LX9YCZ0UWvHF-i9yvxPrg3YHQ",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "111 29, Prästgatan 17, 111 29 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3246672,
        "lng": 18.0702474
      },
      "viewport": {
        "northeast": {
          "lat": 59.3259915802915,
          "lng": 18.0715327302915
        },
        "southwest": {
          "lat": 59.32329361970849,
          "lng": 18.0688347697085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "13445493727c809b866088568c8c139ed68775db",
    "name": "Restaurang Kryp In",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 389,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/104252297049577229583/photos\"\u003efeda Nabulsi\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh6.googleusercontent.com/-8VgIGHVF0bo/V-82edu6pUI/AAAAAAAAACM/gbBy_u81bqwmI_IHrxDrx6SZvT0seZbsQCJkC/k/"
        },
        "width": 550
      }
    ],
    "place_id": "ChIJBQg9XuJ3X0YRtl4p6rFmFME",
    "rating": 4.6,
    "reference": "CmRSAAAAp2YQvDqjc1BSIzMfK2MhJv3yOwxmhaLrP6o0lKO4Ou27CVVsYfkXdkNJFGsHN2007Fgpf9GnWqovDo7OgHfY3sZzPY4TMcA3dJJULVfqq7j0Ehyydp6PrH9Tr2ikfoj1EhAazR8wR-axt3bOnOWVqCEMGhQv7QUEqF55f8wPpcPkUAfyqMy9Fw",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "STUREPLAN 2, 114 35 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.3360041,
        "lng": 18.07336
      },
      "viewport": {
        "northeast": {
          "lat": 59.3374238302915,
          "lng": 18.0745227802915
        },
        "southwest": {
          "lat": 59.33472586970849,
          "lng": 18.07182481970849
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "844bd6f9147b75e7616376e84d9d0c2d4f498358",
    "name": "Sturehof",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 3024,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/106640887848938746435/photos\"\u003eMisha Obolonskyi\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh3.googleusercontent.com/-4lKONYQ-OH0/V1hlp2HQYjI/AAAAAAAAf04/foWIi2-uLA8xxGSjod_XdzK3y7v-NrqKwCJkC/k/"
        },
        "width": 4032
      }
    ],
    "place_id": "ChIJjRRMnFydX0YR1B4u6G720yk",
    "price_level": 3,
    "rating": 4,
    "reference": "CmRRAAAAVocKPY3qwwZtDYBi6qF8V662tNGjh7l14UP_V6oX3ZCRC3an-3guQNUmM-32ZtjZU8qoB-iV8UhPorKPLyfq6pxczaZ5Z9iGwdiUHAnmQVBaRl_HMNIcT6STlLtPEr-2EhDV_sNIUjGjpvGXb7iYhvxDGhTffhvSiVrXxEh7Y-DBVELKYxbWdg",
    "types": ["restaurant", "food", "point_of_interest", "establishment"]
  },
  {
    "formatted_address": "Södermalmsallén 36-38, 118 28 Stockholm, Sweden",
    "geometry": {
      "location": {
        "lat": 59.313408,
        "lng": 18.0695111
      },
      "viewport": {
        "northeast": {
          "lat": 59.31475098029151,
          "lng": 18.0714853802915
        },
        "southwest": {
          "lat": 59.3120530197085,
          "lng": 18.0687874197085
        }
      }
    },
    "icon": "https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",
    "id": "9fa9f9ce39264e3513a258158f66a1d3812f7e6b",
    "name": "USINE",
    "opening_hours": {
      "open_now": true,
      "weekday_text": []
    },
    "photos": [
      {
        "height": 1000,
        "html_attributions": [
          "\u003ca href=\"https://maps.google.com/maps/contrib/114972162648125883915/photos\"\u003eUSINE\u003c/a\u003e"
        ],
        "raw_reference": {
          "fife_url": "https://lh3.googleusercontent.com/-t5JIX56Week/VgukgRhc_xI/AAAAAAAAAA0/jJeMKAsobBsFChZQm4bwQxiWCM6vpfU-ACJkC/k/"
        },
        "width": 1000
      }
    ],
    "place_id": "ChIJtcfkEfB3X0YRZzhye_k1984",
    "rating": 3.8,
    "reference": "CmRSAAAAL3pwQZfW-mL9yDyPg1qy-xHLXhNZc32C-lhiEpfIFoeyhuwVhqO2BKKF2ASkv_4pTsn7ME58cxKs6O3kuuW_ilBlIi4J30J_Sg-PcTsabxpPB0JWTvX53kvQyHUmlgYkEhBHU0BPzzZeARHNUeo6pbyrGhTPTvLoleOk4DGPAdB8QaWupfeQtQ",
    "types": [
      "restaurant",
      "art_gallery",
      "cafe",
      "bar",
      "food",
      "store",
      "point_of_interest",
      "establishment"
    ]
  }
]

// Defining Initial map variables.

var map;
var markers = [];
var stockholm = { lat: 59.32, lng: 18.07 };

function initMap() {
  // Create initial map

  map = new google.maps.Map(document.getElementById('map'), {
    zoom: 13,
    center: stockholm
  });

  var infoWindow = new google.maps.InfoWindow();
  // Creating markers for each location and loading them into the observable Knockout Array.

  for (var i = 0; i < locations.length; i++) {
    (function () {
      var place = locations[i];
      var marker = new google.maps.Marker({
        position: place.geometry.location,
        map: map,
        name: place.name,
        animation: google.maps.Animation.DROP
      });
      markers.push(marker);
      mapsApplication.locationArray()[i].marker = marker;

      marker.addListener('click', function () {
        populateInfoWindow(this, infoWindow)
      });

      // Populating the info window

      function populateInfoWindow(marker, infoWindow) {
        if (infoWindow.marker != marker) {
          infoWindow.marker = marker;
          console.log(marker);
          infoWindow.setContent('<div class="title">' + marker.name + marker.contentString + '</div>');
          marker.setAnimation(google.maps.Animation.BOUNCE);
          setTimeout(function () {
            marker.setAnimation(null);
          }, 2000);
          infoWindow.open(map, marker);

          infoWindow.addListener('closelick', function () {
            infoWindow.setMarker(null);
          });
        }
      }

      // Variables for the Foursquare call
      var fsClientId = 'O5DTF5Y2B3KPIGN15CBVHJZ11JQYMGHVKU2GHQAX1VRYKNBJ';
      var fsClientSecret = 'Q0VCJC0ZFHLEI3S5XTFU3ZJT0S31MS1OHEAIU3ARGI2LYNLE';
      var fsURL = 'https://api.foursquare.com/v2/venues/search'
      var restaurant;
      var type;
      var locURL;

      // Foursquare Ajax call to retrieve additional info
      $.ajax({
        url: fsURL,
        dataType: 'json',
        data: {
          client_id: fsClientId,
          client_secret: fsClientSecret,
          v: 20161016,
          near: 'stockholm',
          query: marker.name
        },
        success: function (res) {
          restaurant = res.response.venues[0];
          if(restaurant.categories[0].name) {
            type = restaurant.categories[0].name;
          } else {
            type = "No type available for this restaurant."
          }
          
          locURL = 'https://foursquare.com/v/' + restaurant.id;
          contentString = '<p>' + type + '<p>' + '<p>Link to Foursquare:' + '<a href="' + locURL + '">' + locURL + '</a>' + '</p>';
          marker.contentString = contentString;
          console.log(marker.contentString)
        },
        error: function (res) {
          contentString = '<p>Cannot connect to foursquare. Please try again.</p>'
          marker.contentString = contentString;
        }
      });
    })(i);
  }
}

// Error handeler for Google Maps

function mapError() {
  alert("Map could not be loaded at this moment. Please try again");
}

var Location = function (data) {
  var self = this;
  this.name = data.name;
  this.location = data.geometry.location;
  this.show = ko.observable(true);
};


// Creating the Knockout functionality

var MapsApplication = function () {
  var self = this;
  this.locationArray = ko.observableArray();
  this.filterInput = ko.observable('');

  for (var i = 0; i < locations.length; i++) {
    var place = new Location(locations[i]);
    self.locationArray.push(place);
  }
  console.log(self.locationArray());

  // This is defining the filter function and setting correct visibility for the map.
  this.searchFilter = ko.computed(function () {
    var filter = self.filterInput().toLowerCase();

    for (var i = 0; i < self.locationArray().length; i++) {
      if (self.locationArray()[i].name.toLowerCase().indexOf(filter) > -1) {
        self.locationArray()[i].show(true);
        if (self.locationArray()[i].marker) {
          self.locationArray()[i].marker.setVisible(true);
        }
      } else {
        self.locationArray()[i].show(false);
        if (self.locationArray()[i].marker) {
          self.locationArray()[i].marker.setVisible(false);
        }
      }
    }
  });

  this.showLocation = function(locationInput) {
    google.maps.event.trigger(locationInput.marker, 'click');
  };
};

// New instance of the mapsApplication Knockout function.
mapsApplication = new MapsApplication();

ko.applyBindings(mapsApplication);